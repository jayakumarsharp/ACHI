@{
    ViewBag.Title = "UserManagement";
}

<h2>UserManagement</h2>
<div class="page-content">
    <div class="container">
        <div class="page-content-inner">
            <div class="row">
                <div class="col-lg-12 col-xs-12 col-sm-12">
                    <div class="portlet light">

                        <div class="portlet-title">
                            <div class="caption">
                                <span class="caption-subject bold uppercase font-dark"> User Management</span>
                            </div>
                            <div class="actions">
                                <button ng-show="!IsReadOnly" data-ng-click="showadd()" name="addUser" class="btn btn-sm btn-circle green" title="Add user">Add <i class="fa fa-plus"></i></button>
                            </div>
                        </div>

                        <div class="portlet-body">
                            <div ng-include="'js/views/Users/UserModel.html'"></div>
                            <div ng-include="'js/views/Users/viewModel.html'"></div>
                            <div ng-include="'js/views/Users/editModel.html'"></div>
                            <div ng-include="'js/views/Users/UserCreateModel.html'"></div>
                            <div data-ag-grid="userGrid" class="ag-blue" style="color:#000;height: 350px;"></div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<div class="modal fade" id="userModel" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" style="width:60%;height:400px">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #444d58;color:white">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
                <h4 class="modal-title" id="myModalLabel" ng-hide="editMode">Add User</h4>
                <h4 class="modal-title" id="myModalLabel" ng-show="editMode">Edit User</h4>
            </div>
            <div class="modal-body">
                <form novalidate class="form-horizontal" role="form" name="adduserform">
                    <div class="form-group">
                        <div>
                            &nbsp;&nbsp;&nbsp;<input name="chkShowSelected" type="checkbox" ng-change="showSelectedUsers(user.showSelected)" ng-model="user.showSelected" style="font-size: 7px" class="mnbxcont">&nbsp;<label style="font-size: 12px;font: 10pt Calibri, Arial, Verdana, sans-serif">Show Selected Users</label></input>
                        </div>
                        <div class="box-body">
                            <div class="mnbxcont" style="margin:0px 20px;">
                                <div data-ag-grid="addUserGrid" class="ag-blue" style="color:#000;height: 250px;"></div>
                            </div>
                        </div>

                        <div class="box-body" style="margin-top:20px;">
                            <!-- <div class="col-xs-4">
                                <select class="form-control" name="ddlType" ng-model="user.selectedType" ng-change="stateChanged(user.selectedType)" ng-options="item.TypeName for item in Types"
                                    title="Select Type" style="width:100%;font-size: 0.8em" required>
                                                <option value="">- Select User Type -</option>
                                            </select>
                            </div> -->
                            <div class="col-xs-4">
                                <select class="form-control" name="ddlRole" ng-model="user.selectedRole" ng-options="item.RoleName for item in Roles" title="Select Role" style="width:100%;font-size: 0.8em" required>
                                    <option value="">- Select Role -</option>
                                </select>
                            </div>
                            <!-- <div class="col-xs-4">
                                <select class="form-control" name="ddlSkill" ng-model="user.selectedSkill" ng-options="item.BaseSkill for item in BaseSkills"
                                    title="Select Base Skill" style="width:100%;font-size: 0.8em">
                                                <option value="">- Select Base Skill -</option>
                                            </select>
                            </div>                                                       -->
                        </div>
                        <div class="box-body">

                            <div class="col-xs-4">
                                <select class="form-control" name="ddlSBU" ng-model="user.selectedSBU" ng-options="item.SBU for item in SBU" title="Select User SBU" style="width:100%;font-size: 0.8em" multiple required>
                                    <option value="">- Select User SBU -</option>
                                </select>
                            </div>
                            <!-- <div class="col-xs-4">
                                <select class="form-control" name="ddlBill" ng-model="user.selectedBilling" ng-change="stateChanged(user.selectedBilling)" ng-options="item.Billing for item in Billings"
                                    title="Select Billing type" style="width:100%;font-size: 0.8em">
                                                <option value="">- Select Billing Type -</option>
                                            </select>
                            </div>     -->
                            <!-- <div class="col-xs-4">
                                <select class="form-control" name="ddlBillingSBU" ng-model="user.selectedBillingSBU" ng-options="item.SBU for item in BillingSBU" title="Select Billing SBU" style="width:100%;font-size: 0.8em"
                                    multiple>
                                                <option value="">- Select Billing SBU -</option>
                                            </select>
                            </div>                              -->
                        </div>
                        <div class="box-body">
                            <div class="col-xs-4">
                                <select class="form-control" name="ddlLocation" ng-model="user.selectedLocation" ng-options="item.Location for item in Locations" title="Select Location" style="width:100%;font-size: 0.8em">
                                    <option value="">- Select Location -</option>
                                </select>
                            </div>

                            <!-- <div class="col-xs-4">
                                <div class="input-group date" datetimepicker ng-model="user.FirstWorkingDate">
                                    <input name="addFWD" type='text' class="form-control" readonly title="Select First Working Date" />
                                    <span name="addFWDCal" class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>
                                    </span>
                                </div>
                            </div>
                            <div class="col-xs-4">
                                <div class="input-group date" datetimepicker ng-model="user.LastWorkingDate">
                                    <input name="addLWD" type='text' class="form-control" readonly title="Select Last Working Date"/>
                                    <span name="addLWDCal" class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>
                                    </span>
                                </div>
                            </div> -->
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <div class="pull-right" style="padding-right:10px">
                    <span data-ng-hide="editMode">
                        <input name="UserAdd" ng-disabled="adduserform.$invalid" type="submit" value="Add Users"
                               data-ng-click="getSelected(user.selectedType,user.selectedRole,user.selectedSBU,user.selectedBillingSBU,user.selectedSkill,user.selectedBilling,user.selectedLocation,user.FirstWorkingDate,user.LastWorkingDate)" class="btn btn-primary" />
                    </span>
                    <input name="UserCancel" type="button" value="Cancel" data-ng-click="cancel()" class="btn btn-primary" />
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="viewModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" style="width:40%">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #444d58;color:white">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
                <h4 class="modal-title" id="myModalLabel">View User</h4>
            </div>
            <div class="modal-body" style="height:450px;overflow-y:auto">
                <div class="box-comments">
                    <form class="form-horizontal" role="form" name="viewuser">
                        <div class="form-group">
                            <label for="Name" class="col-sm-5 control-label">Name</label>
                            <div class="col-sm-7" style="margin-top:6px">
                                {{User.UserName}}
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="Address" class="col-sm-5 control-label">Email ID</label>
                            <div class="col-sm-7" style="margin-top:6px">
                                {{User.EmailId}}
                            </div>
                        </div>
                        <!-- <div class="form-group">
                            <label for="Role" class="col-sm-5 control-label">Type</label>
                            <div class="col-sm-7" style="margin-top:6px">
                                {{GetTypeName(User.TypeId)}}
                            </div>
                        </div> -->
                        <div class="form-group">
                            <label for="Role" class="col-sm-5 control-label">Role</label>
                            <div class="col-sm-7" style="margin-top:6px">
                                {{GetRoleName(User.RoleId)}}
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="SBU" class="col-sm-5 control-label">User SBU</label>
                            <div class="col-sm-7" style="margin-top:6px;">
                                <ul ng-repeat="item in User.selectedSBU">
                                    <li>{{GetSBUName(item.SBUID)}}</li>
                                </ul>
                            </div>
                        </div>
                        <!-- <div class="form-group">
                            <label for="SBU" class="col-sm-5 control-label">Billing SBU</label>
                            <div class="col-sm-7" style="margin-top:6px;">
                                <ul ng-repeat="item in User.selectedBillingSBU">
                                    <li>{{GetSBUName(item.SBUID)}}</li>
                                </ul>
                            </div>
                        </div>                       -->
                        <div class="form-group">
                            <label for="Status" class="col-sm-5 control-label">Status</label>
                            <div class="col-sm-7" style="margin-top:6px">
                                {{User.Status}}
                            </div>
                        </div>
                        <!-- <div class="form-group">
                            <label for="Role" class="col-sm-5 control-label">Billing Type</label>
                            <div class="col-sm-7" style="margin-top:6px">
                                {{GetBillingName(User.BillingId)}}
                            </div>
                        </div> -->
                        <!-- <div class="form-group">
                            <label for="Role" class="col-sm-5 control-label">Base Skill</label>
                            <div class="col-sm-7" style="margin-top:6px">
                                {{GetBaseSkillName(User.BaseSkillId)}}
                            </div>
                        </div> -->
                        <div class="form-group">
                            <label for="Role" class="col-sm-5 control-label">Location</label>
                            <div class="col-sm-7" style="margin-top:6px">
                                {{GetLocationName(User.LocationId)}}
                            </div>
                        </div>
                        <!-- <div class="form-group">
                            <label for="Role" class="col-sm-5 control-label">First Working Date</label>
                            <div class="col-sm-7" style="margin-top:6px">
                                {{User.FirstWorkingDate}}
                            </div>
                        </div> -->
                        <!-- <div class="form-group">
                            <label for="Status" class="col-sm-5 control-label">Last Working Date</label>
                            <div class="col-sm-7" style="margin-top:6px">
                                {{User.LastWorkingDate}}
                            </div>
                        </div> -->
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" name="closeUserView" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="editModel" tabindex="-1" role="dialog" aria-hidden="true">
    <div ng-include="'js/views/confirmRoleChange.html'"></div>
    <div class="modal-dialog" style="width:60%">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #444d58;color:white">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
                <h4 class="modal-title" id="myModalLabel">Edit User</h4>
            </div>
            <div class="box-comments">
                <div class="modal-body" style="height:450px;overflow-y:auto">
                    <form class="form-horizontal" role="form" name="edituser">
                        <div class="form-group">
                            <label for="Name" class="col-sm-4 control-label">Name</label>
                            <div class="col-sm-6" style="margin-top:6px">
                                {{user.UserName}}
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="EmailId" class="col-sm-4 control-label">Email Id</label>
                            <div class="col-sm-6" style="margin-top:6px">
                                {{user.EmailId}}
                            </div>
                        </div>
                        <!-- <div class="form-group">
                            <label for="TypeID" class="col-sm-4 control-label">Type</label>
                            <div class="col-sm-6" style="margin-top:6px">
                                <select name="ddlEditType" class="form-control" ng-model="user.selectedType" ng-change="stateChanged(user.selectedType)" ng-options="item.TypeName for item in Types" title="Select Type" required>
                                    <option value="">- Select Type - </option>
                                </select>
                            </div>
                        </div> -->
                        <div class="form-group">
                            <label for="RoleID" class="col-sm-4 control-label">Role</label>
                            <div class="col-sm-6" style="margin-top:6px">
                                <select name="ddlEditRole" class="form-control" ng-model="user.Role" ng-options=" item.RoleName for item in Roles" title="Select Role" required>
                                    <option value="">- Select Role - </option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="SBU" class="col-sm-4 control-label">User SBU</label>
                            <div class="col-sm-6" style="margin-top:6px">
                                <select name="ddlEditSBU" class="form-control" name="ddlSBU" ng-model="user.selectedSBU" ng-options="item.id as item.SBU for item in SBU" title="Select User SBU" multiple>
                                    <option value="">- Select User SBU -</option>
                                </select>
                            </div>
                        </div>
                        <!-- <div class="form-group">
                            <label for="TypeID" class="col-sm-4 control-label">Billing Type</label>
                            <div class="col-sm-6" style="margin-top:6px">
                                <select name="ddlEditBillingType" class="form-control" ng-change="stateChanged(user.selectedBilling)" ng-model="user.selectedBilling" ng-options="item.Billing for item in Billings" title="Select Billing Type">
                                    <option value="">- Select Billing Type - </option>
                                </select>
                            </div>
                        </div> -->
                        <!-- <div class="form-group">
                            <label for="SBU" class="col-sm-4 control-label">Billing SBU</label>
                            <div class="col-sm-6" style="margin-top:6px">
                                <select name="editBillingSBU" class="form-control" name="ddlBillingSBU" ng-model="user.selectedBillingSBU" ng-options="item.id as item.SBU for item in BillingSBU" title="Select Billing SBU" multiple>
                                    <option value="">- Select Billing SBU -</option>
                                </select>
                            </div>
                        </div> -->
                        <!-- <div class="form-group">
                            <label for="TypeID" class="col-sm-4 control-label">Base Skill</label>
                            <div class="col-sm-6" style="margin-top:6px">
                                <select name="ddlEditBaseSkill" class="form-control" ng-model="user.selectedBaseSkill" ng-options="item.BaseSkill for item in BaseSkills" title="Select Base Skill">
                                    <option value="">- Select Base Skill - </option>
                                </select>
                            </div>
                        </div> -->
                        <div class="form-group">
                            <label for="TypeID" class="col-sm-4 control-label">Location</label>
                            <div class="col-sm-6" style="margin-top:6px">
                                <select name="ddlEditLocation" class="form-control" ng-model="user.selectedLocation" ng-options="item.Location for item in Locations" title="Select Location">
                                    <option value="">- Select Location - </option>
                                </select>
                            </div>
                        </div>
                        <!-- <div class="form-group">
                            <label for="TypeID" class="col-sm-4 control-label">First Working Date</label>
                            <div class="col-sm-6">
                                <div class="input-group date" datetimepicker ng-model="user.FirstWorkingDate">
                                    <input name="editFWD" type='text' class="form-control" readonly />
                                    <span name="editFWDCal" class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>
                                    </span>
                                </div>
                            </div>
                        </div> -->
                        <!-- <div class="form-group">
                            <label for="TypeID" class="col-sm-4 control-label">Last Working Date</label>
                            <div class="col-sm-6">
                                <div class="input-group date" datetimepicker ng-model="user.LastWorkingDate">
                                    <input name="editLWD" type='text' class="form-control" readonly />
                                    <span name="editLWDCal" class="input-group-addon"><span class="glyphicon glyphicon-calendar "></span>
                                    </span>
                                </div>
                            </div>
                        </div> -->
                        <div class="form-group">
                            <label for="Status" class="col-sm-4 control-label">Status</label>
                            <div class="col-sm-6" style="margin-top:6px">
                                <select name="ddlEditStatus" class="form-control" ng-model="user.selectedStatus" title="Select Status" required>
                                    <option value="">- Select Status -</option>
                                    <option value="Active">Active</option>
                                    <option value="Inactive">Inactive</option>
                                </select>
                            </div>
                        </div>
                </div>
                </form>
                <div class="modal-footer">
                    <input name="modifyUser" type="submit" value="Update" data-ng-click="ModifyUser(user)" class="btn btn-primary" ng-disabled="edituser.$invalid || user.selectedSBU < 1 || user.selectedSBU == null" />
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="userCreateModel" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" style="width:30%">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #444d58;color:white">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
                <h4 class="modal-title" id="myModalLabel">Create User</h4>
            </div>
            <div class="box-comments">
                <div class="modal-body">
                    <form class="form-horizontal" role="form" name="createUserForm">
                        <div class="form-group">
                            <label for="Name" class="col-sm-4 control-label">UserID</label>
                            <div class="col-sm-8" style="margin-top:6px">
                                <input ng-model="user.userId" maxlength="25" placeholder="Enter user id" required /><label style="color:red">{{InvalidMessage}}</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="EmailID" class="col-sm-4 control-label">Email</label>
                            <div class="col-sm-6" style="margin-top:6px">
                                <input type="email" ng-model="user.emailId" maxlength="60" placeholder="Enter email id" name="emailId" required />
                            </div><span style="color:red" ng-show="createUserForm.emailId.$error.email">Invalid Email</span>
                        </div>
                        <div class="form-group">
                            <label for="Password" class="col-sm-4 control-label">Password</label>
                            <div class="col-sm-8" style="margin-top:6px">
                                <input type="password" ng-model="user.password" maxlength="25" placeholder="Enter password" required />
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="TypeID" class="col-sm-4 control-label">Type</label>
                            <div class="col-sm-6" style="margin-top:6px">
                                <select class="form-control" ng-model="user.selectedType" ng-change="stateChanged(user.selectedType)" ng-options="item.TypeName for item in Types" title="Select Type" required>
                                    <option value="">- Select Type - </option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="RoleID" class="col-sm-4 control-label">Role</label>
                            <div class="col-sm-6" style="margin-top:6px">
                                <select class="form-control" ng-model="user.Role" ng-options=" item.RoleName for item in Roles" title="Select Role" required>
                                    <option value="">- Select Role - </option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="SBU" class="col-sm-4 control-label">SBU</label>
                            <div class="col-sm-6" style="margin-top:6px">
                                <select class="form-control" name="ddlSBU" ng-model="user.selectedSBU" ng-options="item.id as item.SBU for item in SBU" title="Select SBU" multiple required>
                                    <option value="">- Select SBU -</option>
                                </select>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <input type="submit" value="Create" data-ng-click="CreateTempUser(user)" class="btn btn-primary" ng-disabled="createUserForm.$invalid" />
            </div>
        </div>
    </div>
</div>
<!-- <script>
 .table-borderless td,
.table-borderless th {
    border: 0;
}
</script> -->



<div id="loader " class="animationload hide ">
    <div class="loader ">
        Loading...
    </div>
</div>

