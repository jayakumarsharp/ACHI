@model IEnumerable<CRUserManagement.Models.MenuViewModel>

@{      
    var parentIds = Model.Where(x => x.Parent == 0).ToList();



    foreach (var link in parentIds)
    {
        var submenus = Model.Where(x => x.Parent == link.MenuItemId);
        var isdropdown = submenus.Count() > 0 ? true : false;
        
    @:<li> @if (isdropdown)
           {
          
<a href="@Url.Action(link.ActionName, link.ControllerName, null)" class="dropdown-toggle" data-toggle="dropdown">
                        @link.Name  <span class="caret"></span>
                    </a>
                           
<ul class="dropdown-menu" role="menu">
                        @foreach (var item in submenus)
                        {                                  
<li>@Html.ActionLink(item.Name, item.ActionName, item.ControllerName)</li>      
                        }</ul>  
           }
           else
           {
@Html.ActionLink(link.Name, link.ActionName, link.ControllerName)    
           }
@:</li>     
           } 
   
}




